{% extends "window_base.html" %}
{% load static %}

{% block title %}Get availability predictions{% endblock %}
{% block extra-css %}
    <link rel="stylesheet" type="text/css" href="{% static 'divassist_web/home.css' %}" />
{% endblock %}

{% block content %}
    <head>
        <style>
        #map {
            height: 400px;
            width: 100%;
        }
        </style>
    </head>
    <body>
        <h3>Availability Prediction</h3>
        <div id="map"></div>
        <script>
        function initMap() {
            var chicago = {lat: 41.85, lng: -87.65};
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 12,
                center: chicago
            });
            // get user's location and center
            var geoLocationSuccess = function(location) {
                userLatLong = {lat: location.coords.latitude, lng: location.coords.longitude}
                map.setCenter(userLatLong);
                map.setZoom(16);
                var marker = new google.maps.Marker({
                    position: userLatLong,
                    map: map,
                });
            }
            var geoLocationFailure = function(error) {
                // TODO: what to do here?
                alert("Geolocation failed.");
            }
            navigator.geolocation.getCurrentPosition(geoLocationSuccess, geoLocationFailure);
        }
        </script>
        <script async defer
        src="https://maps.googleapis.com/maps/api/js?key={{ google_maps_key }}&callback=initMap">
        </script>
    </body>
{% endblock %}